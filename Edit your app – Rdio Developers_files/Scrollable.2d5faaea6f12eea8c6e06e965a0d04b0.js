Bujagali.fxns["client/Components/Scrollable/Scrollable.bg.html"]=function(){return function(ctx,args){var self=this;var done=function(post){var markup=self.markup;if(args&&args._blockProviders){args._blockProviders=null}self.done(post);ctx=null;args=null;self=null;done=function(){};return markup};function emit(more){Array.prototype.splice.apply(self.markup,[self.markup.length,more.length].concat(more))}if(R.Utils.canUseScrollable()){emit(['\n  <div class="top_shadow"></div>\n  <div class="bottom_shadow"></div>\n  ']);if(args.verticalScroll){emit(["\n    "]);var __uniqueId=_.uniqueId("__bg_component");emit(['<div id="'+__uniqueId+'" />']);self.view.addChildFromTemplate(__uniqueId,self.view._scrollbars.y,{inStateSection:self._inStateSection});emit(["\n  "])}emit(["\n  "]);if(args.horizontalScroll){emit(["\n    "]);var __uniqueId=_.uniqueId("__bg_component");emit(['<div id="'+__uniqueId+'" />']);self.view.addChildFromTemplate(__uniqueId,self.view._scrollbars.x,{inStateSection:self._inStateSection});emit(["\n  "])}emit(['\n  <div class="scroller',args.horizontalScroll?" horizontal":"",args.verticalScroll?" vertical":"",'"></div>\n'])}emit(["\n"]);return done()}}();R.StyleManager.loadComponentCss("Scrollable",".Scrollable.desktop_scrollable{position:relative;overflow:hidden;}.Scrollable.desktop_scrollable .top_shadow,.Scrollable.desktop_scrollable .bottom_shadow{display:none;background-repeat:repeat-x;position:absolute;height:26px;z-index:98;right:0;left:0;}.Scrollable.desktop_scrollable .bottom_shadow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAaCAMAAAC5Oj0UAAAABGdBTUEAALGPC/xhBQAAAE5QTFRF////////////////////////////////////////////////////////////////////////////////////////////////////6uvsIMGjVQAAABl0Uk5T6/DltJl6y9WK3afAalooUjgSDEohGTBBBplG7fgAAAA+SURBVBjTTcHHEYAgAADBUwwYMYP9N+rvxl2KOMQubnGJVTxiE1mcIolFzKIVUTRiFEFMohO9GEQtfirx6gO95QyzYnTo/QAAAABJRU5ErkJggg==);background-position:bottom;bottom:0;}.Scrollable.desktop_scrollable .top_shadow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAaCAMAAAC5Oj0UAAAABGdBTUEAALGPC/xhBQAAAE5QTFRF////////////////////////////////////////////////////////////////////////////////////////////////////6uvsIMGjVQAAABl0Uk5T8NXrmeW0p4rdy8B6ajgoGVoSIVIwDEpBBuaxIewAAAA+SURBVBjTTcHHEYAgAADBUwwYMYP9N+rvxl1e8VOLRkRRiUGMohWdCKIXk5jFJk7xiCwWcYlVHCKJXdyi6AN/kAyzuoXkjAAAAABJRU5ErkJggg==);background-position:top;top:0;}.Scrollable.desktop_scrollable.small_shadow .bottom_shadow,.Scrollable.desktop_scrollable.small_shadow .top_shadow{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAABAQMAAADQJd16AAAABGdBTUEAALGPC/xhBQAAAANQTFRF6ezvwzeV/AAAAAtJREFUCNdjYGAAAAADAAEg1ZTHAAAAAElFTkSuQmCC);height:2px;}.Scrollable.desktop_scrollable.show_bottom_shadow .bottom_shadow{display:block;}.Scrollable.desktop_scrollable.show_top_shadow .top_shadow{display:block;}.Scrollable.desktop_scrollable>.scroller{overflow:hidden;}.Scrollable.desktop_scrollable>.scroller.vertical{overflow-y:scroll;}.Scrollable.desktop_scrollable>.scroller.horizontal{overflow-x:scroll;}.Scrollable.desktop_scrollable>.scroller.chromium19Hack{-webkit-overflow-scrolling:auto;}.Scrollable.desktop_scrollable.allowMask>.scroller>*{padding-top:87px;padding-bottom:20px;}.Scrollable.desktop_scrollable .scroller::-webkit-scrollbar{width:0;height:0;}.Scrollable.desktop_scrollable .scroller{padding-right:40px;padding-bottom:20px;}.Scrollable.native{position:relative;overflow:hidden;}.Scrollable.native.allowMask>*{padding-top:87px;padding-bottom:20px;}.Scrollable.native.verticalScroll{overflow-y:auto;}.Scrollable.native.horizontalScroll{overflow-x:auto;}.Scrollable.inside_layout_column{padding-right:15px;}.Scrollable.touch{-webkit-overflow-scrolling:touch;}.Scrollable.touch .section_header,.Scrollable.touch .simple_section_header{-webkit-transform:translate3d(0, 0, 0);}.App_Rdio .app_main.notification .Scrollable.allowMask>.scroller>*,.App_Rdio .app_main.notification .Scrollable.native.allowMask>*{padding-top:122px;}.desktop .Scrollable.allowMask>.scroller>*{padding-top:82px;}.desktop.new_desktop_header .Scrollable.allowMask>.scroller>*{padding-top:56px;}.desktop .App_Rdio .app_main.notification .Scrollable.allowMask>.scroller>*{padding-top:117px;}.desktop.new_desktop_header .App_Rdio .app_main.notification .Scrollable.allowMask>.scroller>*,.desktop.new_desktop_header .App_Rdio .app_main.notification .Scrollable.native.allowMask>*{padding-top:55px;}.mac_desktop .Scrollable.allowMask>*{padding:19px 0;}");!function($){function deferred_calculate($el,prop){if(_.isNull($el)){return 0}var ret=$el.data("cached-"+prop);if($el.data("scheduled-"+prop)){return ret}function calc_values(){var value=$el[prop]();if(_.isNumber(value)){$el.data("cached-"+prop,value)}$el.data("scheduled-"+prop,false);return value}if(typeof ret!=="undefined"){$el.data("scheduled-"+prop,true);_.defer(calc_values);return ret}return calc_values()}var dragScrollingMixin={onMixin:function(){_.defaults(this.options,{maskingPadding:{top:20,bottom:20}})},onRendered:function(){if(this.options.scrollOnDragHover){this._setupScrollOnDragHover()}},_setupScrollOnDragHover:function(){var self=this;var $el=$(this.el);self._dragNamespace=_.uniqueId("scrollable");var dragEnterListener=function(){var topMargin=parseInt(self.$content.css("margin-top"),10)||0;var bottomMargin=parseInt(self.$content.css("margin-bottom"),10)||0;var topPadding=parseInt(self.$content.css("padding-top"),10)||0;var bottomPadding=parseInt(self.$content.css("padding-bottom"),10)||0;var topBuffer=topMargin+topPadding;var bottomBuffer=bottomMargin+bottomPadding;if(self.options.allowMasking){topBuffer-=self.options.maskingPadding.top;bottomBuffer-=self.options.maskingPadding.bottom}self._offset=$el.offset();if(!_.isObject(self._offset)){console.error("Couldn't get offset for element: ",$el);return}self.areaHeight=$el.outerHeight();self.offsetBottom=self._offset.top+self.areaHeight-bottomBuffer;self._offset.top+=topBuffer;self.hotScrollMaxIncrement=Math.max(self.$content.outerHeight()*.02,75);self.hotScrollMinIncrement=1;self.hotZoneHeight=Math.min(Math.max(self.areaHeight*.125,10),100)};var dragOverListener=R.Utils.reportErrors(function(e){var eventY;if(R.isIE){eventY=e.originalEvent.clientY}else{eventY=e.originalEvent.pageY}var top=eventY-self._offset.top;var bottom=self.offsetBottom-eventY;if(top>=0&&top<self.hotZoneHeight){self.hotZonePosition=(self.hotZoneHeight-Math.max(eventY-self._offset.top,0))/self.hotZoneHeight;self.scrollTop(self.scrollTop()-self._getHotScrollDelta())}else if(bottom>=0&&bottom<self.hotZoneHeight){self.hotZonePosition=(self.hotZoneHeight-Math.max(self.offsetBottom-eventY,0))/self.hotZoneHeight;self.scrollTop(self.scrollTop()+self._getHotScrollDelta())}},"DragOverListener");if(R.dragManager){R.dragManager.setupDragListener(this.el,{onOver:dragOverListener,onEnter:dragEnterListener,namespace:self._getDragListenerNamespace()})}},_getDragListenerNamespace:function(){return"scrollable_"+this.cid},_getHotScrollDelta:function(){return this.hotScrollMinIncrement+Math.pow(this.hotZonePosition,3)*(this.hotScrollMaxIncrement-this.hotScrollMinIncrement)}};if(R.Utils.canUseScrollable()){R.Component.create("Scrollable",{dependencies:["Scrollable.Scrollbar"],events:{mouseenter:"flashScrollbars","mouseover .Scrollable_Scrollbar.vertical":"onVerticalMouseover","mouseover .Scrollable_Scrollbar.horizontal":"onHorizontalMouseover"},className:"desktop_scrollable",options:{contentEl:null,sizeToParent:true,maxHeight:null,verticalScroll:true,horizontalScroll:false,scrollOnDragHover:false,sizeToContent:true,showShadow:false,smallShadow:false,shadowOffset:0,allowMasking:false,insideLayoutColumn:false,autoResize:true},initialize:function(){R.Component.prototype.initialize.apply(this,arguments);this._scrollbars={};_.bindAll(this,"onScrolled","showShadow","onStarted","onStopped");var details=R.Utils.getUserEnvironment(navigator);this._requiresChromium19Hack=details.browser=="Rdio Windows App"&&details.browserVersion<=1.11;if(this.options.insideLayoutColumn){this.$el.addClass("inside_layout_column")}if(Modernizr.touch){this.$el.addClass("touch")}this.mixin(dragScrollingMixin)},createChildComponents:function(){if(this.options.verticalScroll){this._scrollbars.y=new R.Components.Scrollable.Scrollbar({style:this.options.style,orientation:"vertical",allowMasking:this.options.allowMasking})}if(this.options.horizontalScroll){this._scrollbars.x=new R.Components.Scrollable.Scrollbar({style:this.options.style,orientation:"horizontal"})}},unwrap:function(){$(this.options.contentEl).insertBefore(this.$el);this.destroy()},onRendered:function(){if(this._requiresChromium19Hack){this.$(".scroller").addClass("chromium19Hack")}if(this.options.contentEl){this.$el.insertBefore(this.options.contentEl);this.$(".scroller").append(this.options.contentEl)}var self=this;_.each(self._scrollbars,function(scrollbar){self.listen(scrollbar,"scrollTop",self.scrollTop);self.listen(scrollbar,"scrollLeft",self.scrollLeft)});this.$scroller=this.$("> .scroller");this.$content=$(this.options.contentEl||"<div />");this.$scroller.append(this.$content);if(this.options.sizeToParent){this.$parent=$(this.el).parent()}if(this.options.smallShadow){this.$el.addClass("small_shadow")}if(this.options.shadowOffset){this.$(".top_shadow, .bottom_shadow").css({left:this.options.shadowOffset,right:this.options.shadowOffset})}if(this.options.allowMasking){this.$el.addClass("allowMask")}if(this.options.maxHeight){this.$el.css("maxHeight",this.options.maxHeight);this.$scroller.css("maxHeight",this.options.maxHeight)}},onInserted:function(){if(this.options.autoResize&&R.app){this.listen(R.app,"resize",_.throttle(this.callback(this.size),50))}this.$scroller.on("scroll",this.onScrolled);if(this.options.showShadow){this.$scroller.on("scroll",this.showShadow);this._shadowTimer=window.setInterval(this.showShadow,100)}this.onScrolled();if(this.options.sizeToParent||this.options.sizeToContent){this.size()}var self=this;_.defer(function(){self.flashScrollbars()})},onDetached:function(){this.$scroller.off("scroll",this.onScrolled);if(this._shadowTimer){window.clearInterval(this._shadowTimer)}},onDestroyed:function(){this.$scroller=this.$content=this.$parent=null;this._scrollbars=null;if(this.options.scrollOnDragHover&&R.dragManager){R.dragManager.cleanupDragListener(this.el,this._getDragListenerNamespace())}},size:function(){if(this.isDestroyed()){return}var scrollbarSize=R.Utils.scrollbarSize();if(this.options.sizeToParent){this.height(this.$parent.height());this.width(this.$parent.width())}else if(this.options.sizeToContent){if(this.options.verticalScroll&&!this.options.horizontalScroll){this.$scroller.width(this.$content.outerWidth(true)+scrollbarSize);$(this.el).width(this.$content.outerWidth(true))}if(this.options.horizontalScroll&&!this.options.verticalScroll){this.$scroller.height(this.$content.outerHeight(true)+scrollbarSize);$(this.el).height(this.$content.outerHeight(true))}}this.trigger("resize")},onStarted:function(){this._isScrolling=true;this.$el.addClass("scrolling")},onStopped:function(){this._isScrolling=false;this.$el.removeClass("scrolling")},onScrolled:function(){if(!this.onScrolled._to_scroll){_.defer(this.callback(function(){this.currentScrollTop=this.$scroller.scrollTop();this.flashScrollbars();this.trigger("scroll");delete this.onScrolled._to_scroll}))}this.onScrolled._to_scroll=true;if(!this._isScrolling){this.onStarted()}clearTimeout(this._scrollDelayId);this._scrollDelayId=_.delay(this.onStopped,500)},onVerticalMouseover:function(){this._scrollbars.y.resize(this)},onHorizontalMouseover:function(){this._scrollbars.x.resize(this)},contentEl:function(){return this.$content[0]},horizontalScrollbarWidth:function(){return this.options.horizontalScroll?R.Utils.scrollbarSize():0},verticalScrollbarWidth:function(){return this.options.verticalScroll?R.Utils.scrollbarSize():0},scrollWidth:function(){var scrollerPadding=this.$scroller.outerWidth()-this.$scroller.width();return this.$scroller[0].scrollWidth-scrollerPadding},scrollHeight:function(){if(this.options.allowMasking){return this.$content.height()}var scrollerPadding=this.$scroller.outerHeight()-this.$scroller.height();return this.$scroller[0].scrollHeight-scrollerPadding},height:function(height){var $el=$(this.el);if(height){var horizontalScrollbarHeight=this.horizontalScrollbarWidth();this.$scroller.height(height+horizontalScrollbarHeight);$el.height(height);this.showShadow();return this}else{return $el.height()}},width:function(width){var $el=$(this.el);if(width){var verticalScrollbarWidth=this.verticalScrollbarWidth();var scrollerWidth=width;if(_.isString(width)&&width.charAt(width.length-1)=="%"){var widthPercent=parseInt(width,10)/100;scrollerWidth=this.$scroller.parent().width()*widthPercent}this.$scroller.width(scrollerWidth);$el.width(width);return this}else{return deferred_calculate($el,"width")}},offset:function(){return this.$el.offset.apply(this.$el,arguments)},scrollTop:function(value){if(_.isNumber(value)){var old=this.$scroller.scrollTop();if(old!=value){this.$scroller.scrollTop(value);this.currentScrollTop=value;if(value&&this._scrollbars.y){this._scrollbars.y.resize(this)}this.$content.scroll()}return this}else{return this.currentScrollTop}},scrollLeft:function(value){if(value){this.$scroller.scrollLeft(value);if(this._scrollbars.x){this._scrollbars.x.resize(this)}this.$content.scroll();return this}else{return deferred_calculate(this.$scroller,"scrollLeft")}},flashScrollbars:function(){_.invoke(this._scrollbars,"resize",this);_.invoke(this._scrollbars,"flashPuck")},showShadow:function(){if(!this.options.showShadow){return}var outerHeight=this.height();var innerHeight=this.$content.height();var scrollTop=this.scrollTop();this.$el.toggleClass("show_bottom_shadow",innerHeight>outerHeight+scrollTop);this.$el.toggleClass("show_top_shadow",scrollTop>0)},setMaxHeight:function(value){this.$el.css("maxHeight",value);this.$scroller.css("maxHeight",value)}})}else{R.Component.create("Scrollable",{className:"native",events:{scroll:"onScrolled"},_proxiedFunctions:["scrollTop","scrollHeight","scrollLeft","scrollWidth","height","width","offset"],options:{verticalScroll:true,horizontalScroll:false,sizeToParent:true,maxHeight:null,insideLayoutColumn:false,autoResize:true},initialize:function(){R.Component.prototype.initialize.apply(this,arguments);_.each(this._proxiedFunctions,function(fnName){this[fnName]=function(){return this.$el[fnName].apply(this.$el,arguments)}},this);if(this.options.verticalScroll){this.$el.addClass("verticalScroll")}if(this.options.horizontalScroll){this.$el.addClass("horizontalScroll")}if(this.options.insideLayoutColumn){this.$el.addClass("inside_layout_column")}if(R.Utils.scrollbarSize()>0){this.$el.addClass("has_thickness")}if(Modernizr.touch){this.$el.addClass("touch")}this.mixin(dragScrollingMixin)},contentEl:function(){return this.$content},onRendered:function(){this.$scroller=this.$el;if(this.options.autoResize&&R.app){this.listen(R.app,"resize",this.onResized)}this.$content=$(this.options.contentEl)||$("<div />");this.$el.insertBefore(this.$content);this.$el.append(this.$content);if(this.options.allowMasking){this.$el.addClass("allowMask")}if(this.options.maxHeight){this.$el.css("maxHeight",this.options.maxHeight)}},onInserted:function(){this.$parent=this.$el.parent();this.size()},onScrolled:function(){this.trigger("scroll")},onResized:function(){this.size();this.trigger("resize")},size:function(){if(this.options.sizeToParent&&this.isInserted()){this.height(this.$parent.height());this.width(this.$parent.width())}},unwrap:function(){$(this.options.contentEl).insertBefore(this.$el);this.destroy()},setMaxHeight:function(maxHeight){this.$el.css("maxHeight",maxHeight)},flashScrollbars:R.doNothing,showShadow:R.doNothing})}}(R.$);
//# sourceMappingURL=/media/client/orig/Components/Scrollable.2d5faaea6f12eea8c6e06e965a0d04b0.js.map